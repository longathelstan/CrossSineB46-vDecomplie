/*
 * Decompiled with CFR 0.152.
 */
package net.ccbluex.liquidbounce.features.module.modules.combat;

import kotlin.Metadata;
import kotlin.jvm.functions.Function0;
import kotlin.jvm.internal.Intrinsics;
import net.ccbluex.liquidbounce.event.EventTarget;
import net.ccbluex.liquidbounce.event.UpdateEvent;
import net.ccbluex.liquidbounce.features.module.Module;
import net.ccbluex.liquidbounce.features.module.ModuleCategory;
import net.ccbluex.liquidbounce.features.module.ModuleInfo;
import net.ccbluex.liquidbounce.features.module.modules.combat.BowAimbot;
import net.ccbluex.liquidbounce.features.value.BoolValue;
import net.ccbluex.liquidbounce.features.value.IntegerValue;
import net.ccbluex.liquidbounce.features.value.ListValue;
import net.ccbluex.liquidbounce.features.value.Value;
import net.ccbluex.liquidbounce.utils.MinecraftInstance;
import net.ccbluex.liquidbounce.utils.PacketUtils;
import net.ccbluex.liquidbounce.utils.RotationUtils;
import net.ccbluex.liquidbounce.utils.timer.MSTimer;
import net.minecraft.item.ItemBow;
import net.minecraft.item.ItemStack;
import net.minecraft.network.Packet;
import net.minecraft.network.play.INetHandlerPlayServer;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C07PacketPlayerDigging;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;
import org.jetbrains.annotations.NotNull;

@ModuleInfo(name="BowExploit", category=ModuleCategory.COMBAT)
@Metadata(mv={1, 6, 0}, k=1, xi=48, d1={"\u00008\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0002\u0010\b\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0002\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\b\u0007\u0018\u00002\u00020\u0001B\u0005\u00a2\u0006\u0002\u0010\u0002J\u0010\u0010\u000f\u001a\u00020\u00102\u0006\u0010\u0011\u001a\u00020\u0012H\u0007R\u0014\u0010\u0003\u001a\b\u0012\u0004\u0012\u00020\u00050\u0004X\u0082\u0004\u00a2\u0006\u0002\n\u0000R\u000e\u0010\u0006\u001a\u00020\u0007X\u0082\u0004\u00a2\u0006\u0002\n\u0000R\u0014\u0010\b\u001a\b\u0012\u0004\u0012\u00020\u00050\u0004X\u0082\u0004\u00a2\u0006\u0002\n\u0000R\u0011\u0010\t\u001a\u00020\n\u00a2\u0006\b\n\u0000\u001a\u0004\b\u000b\u0010\fR\u000e\u0010\r\u001a\u00020\u000eX\u0082\u0004\u00a2\u0006\u0002\n\u0000\u00a8\u0006\u0013"}, d2={"Lnet/ccbluex/liquidbounce/features/module/modules/combat/BowExploit;", "Lnet/ccbluex/liquidbounce/features/module/Module;", "()V", "delay", "Lnet/ccbluex/liquidbounce/features/value/Value;", "", "modeValue", "Lnet/ccbluex/liquidbounce/features/value/ListValue;", "packetsValue", "timer", "Lnet/ccbluex/liquidbounce/utils/timer/MSTimer;", "getTimer", "()Lnet/ccbluex/liquidbounce/utils/timer/MSTimer;", "waitForBowAimbot", "Lnet/ccbluex/liquidbounce/features/value/BoolValue;", "onUpdate", "", "event", "Lnet/ccbluex/liquidbounce/event/UpdateEvent;", "CrossSine"})
public final class BowExploit
extends Module {
    @NotNull
    private final ListValue modeValue;
    @NotNull
    private final BoolValue waitForBowAimbot;
    @NotNull
    private final Value<Integer> packetsValue;
    @NotNull
    private final Value<Integer> delay;
    @NotNull
    private final MSTimer timer;

    public BowExploit() {
        String[] stringArray = new String[]{"FastBow", "AutoBow"};
        this.modeValue = new ListValue("Mode", stringArray, "FastBow");
        this.waitForBowAimbot = new BoolValue("WaitForBowAimbot", false);
        this.packetsValue = new IntegerValue("Packets", 20, 3, 20).displayable(new Function0<Boolean>(this){
            final /* synthetic */ BowExploit this$0;
            {
                this.this$0 = $receiver;
                super(0);
            }

            @NotNull
            public final Boolean invoke() {
                return BowExploit.access$getModeValue$p(this.this$0).equals("FastBow");
            }
        });
        this.delay = new IntegerValue("Delay", 0, 0, 500).displayable(new Function0<Boolean>(this){
            final /* synthetic */ BowExploit this$0;
            {
                this.this$0 = $receiver;
                super(0);
            }

            @NotNull
            public final Boolean invoke() {
                return BowExploit.access$getModeValue$p(this.this$0).equals("FastBow");
            }
        });
        this.timer = new MSTimer();
    }

    @NotNull
    public final MSTimer getTimer() {
        return this.timer;
    }

    @EventTarget
    public final void onUpdate(@NotNull UpdateEvent event) {
        Intrinsics.checkNotNullParameter(event, "event");
        if (this.modeValue.equals("AutoBow")) {
            if (MinecraftInstance.mc.field_71439_g.func_71039_bw()) {
                ItemStack itemStack = MinecraftInstance.mc.field_71439_g.func_70694_bm();
                if ((itemStack == null ? null : itemStack.func_77973_b()) instanceof ItemBow && MinecraftInstance.mc.field_71439_g.func_71057_bx() > 20 && (!((Boolean)this.waitForBowAimbot.get()).booleanValue() || !BowAimbot.INSTANCE.getState() || BowAimbot.INSTANCE.hasTarget())) {
                    MinecraftInstance.mc.field_71439_g.func_71034_by();
                    PacketUtils.sendPacketNoEvent((Packet<INetHandlerPlayServer>)((Packet)new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.field_177992_a, EnumFacing.DOWN)));
                }
            }
        } else if (MinecraftInstance.mc.field_71439_g.func_71039_bw() && MinecraftInstance.mc.field_71439_g.field_71071_by.func_70448_g() != null && MinecraftInstance.mc.field_71439_g.field_71071_by.func_70448_g().func_77973_b() instanceof ItemBow) {
            PacketUtils.sendPacketNoEvent((Packet<INetHandlerPlayServer>)((Packet)new C08PacketPlayerBlockPlacement(BlockPos.field_177992_a, 255, MinecraftInstance.mc.field_71439_g.func_71045_bC(), 0.0f, 0.0f, 0.0f)));
            float yaw = RotationUtils.targetRotation != null ? RotationUtils.targetRotation.getYaw() : MinecraftInstance.mc.field_71439_g.field_70177_z;
            float pitch = RotationUtils.targetRotation != null ? RotationUtils.targetRotation.getPitch() : MinecraftInstance.mc.field_71439_g.field_70125_A;
            int n = 0;
            int n2 = ((Number)this.packetsValue.get()).intValue();
            while (n < n2) {
                int i = n++;
                PacketUtils.sendPacketNoEvent((Packet<INetHandlerPlayServer>)((Packet)new C03PacketPlayer.C05PacketPlayerLook(yaw, pitch, true)));
            }
            if (this.timer.hasTimePassed(((Number)this.delay.get()).intValue())) {
                PacketUtils.sendPacketNoEvent((Packet<INetHandlerPlayServer>)((Packet)new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.field_177992_a, EnumFacing.DOWN)));
                this.timer.reset();
            }
            MinecraftInstance.mc.field_71439_g.field_71072_f = MinecraftInstance.mc.field_71439_g.field_71071_by.func_70448_g().func_77988_m() - 1;
        }
    }

    public static final /* synthetic */ ListValue access$getModeValue$p(BowExploit $this) {
        return $this.modeValue;
    }
}

